{% extends 'base_generic.html' %}

{% load static %}

{% block header %}
	<title> Covid19 Trends </title>
{% endblock %}

{% block content %}
    <div class="container-fluid" style = "padding-top: 2%; padding-bottom:2%">
		<h1> {{ country }} # Cases Confirmed </h1>
	</div>

	<div class="container" style="padding-top: 1%; padding-bottom: 1%">
		<!-- Content here -->
		<form action = "", method = "GET", onChange="this.submit();">
				Country filter: {{ country_filter_form.country_filter}}

		</form>
	</div>

	<div id="container" style="min-width: 310px; max-width:80%; height: 500px; margin: 0 auto" class="border">
		<script src="https://code.highcharts.com/highcharts.js"> </script>
		<script src="https://code.highcharts.com/modules/exporting.js"> </script>
		<script src="https://code.highcharts.com/modules/export-data.js"> </script>
		<script src="https://code.highcharts.com/modules/accessibility.js"></script>
		<script>
			_dates = {{dates|safe}};
			_b1 = {{breakdown_1|safe}};
			_b2 = {{breakdown_2|safe}};
			_b3 = {{breakdown_3|safe}};
			_b4 = {{breakdown_4|safe}};
			_b5 = {{breakdown_5|safe}};
			_b6 = {{breakdown_6|safe}};
			_b1name = {{breakdown_1_name|safe}}
			_b2name = {{breakdown_2_name|safe}}
			_b3name = {{breakdown_3_name|safe}}
			_b4name = {{breakdown_4_name|safe}}
			_b5name = {{breakdown_5_name|safe}}
			_b6name = {{breakdown_6_name|safe}}

			Highcharts.chart('container', {
			  	chart: {type: 'area'},
			  	rangeSelector: { selected: 4},
			  	title: {text: 'Cummulative Confirmed Cases', style: {fontSize:"24px"}},
			  	subtitle: {text: 'Global data from Johns Hopkins, US state-level data from the New York Times'},
			  	xAxis: {categories: _dates},
			  	yAxis: {
			  		title: {text: '# Confirmed Cases'}
			  	},
			  	plotOptions: {
			  		area: {
			  			stacking: 'normal'
			  		}, 
			  		series: {marker: {radius: 8}}
			  	},
			  	series: [{ 
			  		name: _b1name,
			  		data: _b1
		  		},{
		  			name: _b2name, 
		  			data: _b2
		  		},{ 
			  		name: _b3name,
			  		data: _b3
		  		},{
		  			name: _b4name, 
		  			data: _b4
		  		},{ 
			  		name: _b5name,
			  		data: _b5
		  		},{
		  			name: _b6name, 
		  			data: _b6 
		  		}]
	      	});
		</script>

</div>
{% endblock %}